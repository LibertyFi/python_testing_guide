# Guide

- Use MagicMock and AsyncMock, avoid using Mock unless there’s a good reason not to auto mock the magic methods
- Use MagicMock with spec_set if only the class attributes need to be mocked MagicMock(spec_set=MyClass)
- Use MagicMock with spec if instance attributes need to be mocked. You can specify the instance attributes in a one liner MagicMock(spec=MyClass, attribute_0 = “value0”, attribute_1 = “value1”).
- Never use MagicMock without spec or spec_set
- Structure your test file like so:
  - imports
  - common mock constants
  - test fixtures
  - tests
- Use helper functions to avoid duplicating code between tests, for initialization code or mock setup for instance. Put the helper functions inbetween the tests, before the tests that use them.
- Use patch decorators to mock things for a specific test
- Use spec and spec_set in the patch if it patches a class or an object
- If the same patch or variable mock is used by more than 2 tests, make it a test fixture
- Structure your tests like so:
  - initialization of variables and mocks
  - empty line
  - call to the function under test
  - empty line
  - mock calls asserts
  - empty line
  - value asserts
